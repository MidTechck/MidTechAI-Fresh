<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MidTechAI v2</title>
<style>
body { font-family: Arial, sans-serif; background:#f0f0f0; }
#chat { width: 90%; max-width: 600px; margin: 30px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow:0 0 10px rgba(0,0,0,0.2);}
.message { padding: 8px 12px; margin: 5px 0; border-radius: 8px; max-width: 80%; }
.user { background:#007bff; color:#fff; margin-left:auto; text-align:right; }
.bot { background:#e2e2e2; color:#000; margin-right:auto; text-align:left; }
#inputBox { display:flex; margin-top:10px; }
#inputBox input { flex:1; padding:10px; border-radius:8px; border:1px solid #ccc; }
#inputBox button { padding:10px 20px; border:none; border-radius:8px; background:#007bff; color:#fff; margin-left:5px; cursor:pointer; }
</style>
</head>
<body>
<div id="chat">
  <div id="messages"></div>
  <div id="inputBox">
    <input type="text" id="userInput" placeholder="Type your message..."/>
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
async function sendMessage(){
    const input = document.getElementById("userInput");
    const message = input.value.trim();
    if(message==="") return;
    
    addMessage(message,"user");
    input.value="";
    
    const res = await fetch("/ask", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({message})
    });
    const data = await res.json();
    addMessage(data.reply,"bot");
}

function addMessage(text, cls){
    const messages = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = `message ${cls}`;
    div.textContent = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}
</script>
</body>
</html>
