<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MidTechAI Assistant</title>
<style>
body { background:#121212; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; height:100vh; margin:0; }
header { padding:10px; text-align:center; background:#1f1f1f; font-size:1.5em; }
#chat { flex:1; padding:10px; overflow-y:auto; display:flex; flex-direction:column; }
.message { margin:5px 0; padding:10px; border-radius:10px; max-width:70%; }
.user { align-self:flex-end; background:#333; }
.bot { align-self:flex-start; background:#0055ff; }
#input-area { display:flex; padding:10px; background:#1f1f1f; }
#user-input { flex:1; padding:10px; border:none; border-radius:10px; background:#2a2a2a; color:#fff; }
#send-btn { padding:10px 15px; margin-left:5px; border:none; border-radius:10px; background:#0055ff; color:#fff; cursor:pointer; }
.typing { font-style:italic; font-size:0.9em; color:#aaa; margin-left:5px; }
</style>
</head>
<body>
<header>MidTechAI Assistant</header>
<div id="chat"></div>
<div id="input-area">
<input id="user-input" placeholder="Type your message..." autocomplete="off">
<button id="send-btn">Send</button>
</div>
<script>
const chat = document.getElementById("chat");
const input = document.getElementById("user-input");
const btn = document.getElementById("send-btn");

function addMessage(text, cls) {
    const div = document.createElement("div");
    div.className = "message " + cls;
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

btn.onclick = async () => {
    const msg = input.value.trim();
    if(!msg) return;
    addMessage(msg, "user");
    input.value = "";
    const typing = document.createElement("div");
    typing.className = "typing bot";
    typing.textContent = "MidTechAI is typing...";
    chat.appendChild(typing);
    chat.scrollTop = chat.scrollHeight;

    const res = await fetch("/ask", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({message: msg})
    });
    const data = await res.json();
    chat.removeChild(typing);
    addMessage(data.response, "bot");
}
input.addEventListener("keypress", function(e){
    if(e.key === "Enter"){ btn.click(); }
});
</script>
</body>
</html>
